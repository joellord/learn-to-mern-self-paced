"use strict";(self.webpackChunkswiftui_realm_app=self.webpackChunkswiftui_realm_app||[]).push([[4580],{3905:(e,t,r)=>{r.d(t,{Zo:()=>u,kt:()=>k});var o=r(7294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,o,a=function(e,t){if(null==e)return{};var r,o,a={},n=Object.keys(e);for(o=0;o<n.length;o++)r=n[o],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(o=0;o<n.length;o++)r=n[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var i=o.createContext({}),d=function(e){var t=o.useContext(i),r=t;return e&&(r="function"==typeof e?e(t):l(l({},t),e)),r},u=function(e){var t=d(e.components);return o.createElement(i.Provider,{value:t},e.children)},c="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},h=o.forwardRef((function(e,t){var r=e.components,a=e.mdxType,n=e.originalType,i=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),c=d(r),h=a,k=c["".concat(i,".").concat(h)]||c[h]||p[h]||n;return r?o.createElement(k,l(l({ref:t},u),{},{components:r})):o.createElement(k,l({ref:t},u))}));function k(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var n=r.length,l=new Array(n);l[0]=h;var s={};for(var i in t)hasOwnProperty.call(t,i)&&(s[i]=t[i]);s.originalType=e,s[c]="string"==typeof e?e:a,l[1]=s;for(var d=2;d<n;d++)l[d]=r[d];return o.createElement.apply(null,l)}return o.createElement.apply(null,r)}h.displayName="MDXCreateElement"},8673:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>i,contentTitle:()=>l,default:()=>p,frontMatter:()=>n,metadata:()=>s,toc:()=>d});var o=r(7462),a=(r(7294),r(3905));const n={},l="Solutions",s={unversionedId:"node/solution",id:"node/solution",title:"Solutions",description:"Are you already looking at this solution? If so, you might as well read it. I'll try to explain my thought process as I go along.",source:"@site/docs/5-node/5-solution.mdx",sourceDirName:"5-node",slug:"/node/solution",permalink:"/learn-to-mern-self-paced/docs/node/solution",draft:!1,editUrl:"https://github.com/mongodb-developer/learn-to-mern-self-paced/blob/main/docs/5-node/5-solution.mdx",tags:[],version:"current",sidebarPosition:5,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Get working!",permalink:"/learn-to-mern-self-paced/docs/node/get-working"},next:{title:"MongoDB",permalink:"/learn-to-mern-self-paced/docs/category/mongodb"}},i={},d=[{value:"Create the server",id:"create-the-server",level:2},{value:"Add your &quot;database&quot;",id:"add-your-database",level:2},{value:"Get all records",id:"get-all-records",level:2},{value:"Get a single record",id:"get-a-single-record",level:2},{value:"Add a record",id:"add-a-record",level:2},{value:"Update a record",id:"update-a-record",level:2},{value:"Delete a record",id:"delete-a-record",level:2}],u={toc:d},c="wrapper";function p(e){let{components:t,...r}=e;return(0,a.kt)(c,(0,o.Z)({},u,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"solutions"},"Solutions"),(0,a.kt)("p",null,"Are you already looking at this solution? If so, you might as well read it. I'll try to explain my thought process as I go along."),(0,a.kt)("h2",{id:"create-the-server"},"Create the server"),(0,a.kt)("p",null,"I like to start with a server that uses a single route. This helps me get the server up and running quickly. I can then test that the server is working before I start adding more routes."),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"In this example, I'm using an environment variable to set the port. This allows me to use a different port when I deploy the app to my production server. I default it to 5050 if the environment variable is not set.")),(0,a.kt)("details",null,(0,a.kt)("summary",null,"Click here to see the code"),(0,a.kt)("div",null,(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'import express from "express";\nimport cors from "cors";\n\nconst port = process.env.PORT || 5050;\nconst app = express();\napp.use(cors());\n\napp.get("/", (req, res) => {\n  const serverStatus = {\n    status: "running",\n    port: port,\n    timestamp: new Date().getTime(),\n    message: "Welcome to my book API"\n  };\n  res.json(serverStatus).status(200);\n});\n\napp.listen(port, () => console.log(`Server running on port ${port}`));\n')))),(0,a.kt)("p",null,"You should be able to test it out using curl."),(0,a.kt)("details",null,(0,a.kt)("summary",null,"Click here to see the code"),(0,a.kt)("div",null,(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"curl http://localhost:5050\n")))),(0,a.kt)("h2",{id:"add-your-database"},'Add your "database"'),(0,a.kt)("p",null,"Add a variable that contains all of your entries. In this case, I'm using an array that contains a list of books."),(0,a.kt)("details",null,(0,a.kt)("summary",null,"Click here to see the code"),(0,a.kt)("div",null,(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'const books = [\n  {\n    id: 0,\n    title: "The Alchemist",\n    author: "Paulo Coelho",\n    description: "A book about following your dreams",\n    pages: 163,\n    currentPage: 163,\n    read: true\n  },\n  {\n    id: 1,\n    title: "The Prophet",\n    author: "Kahlil Gibran",\n    description: "A story about a prophet",\n    pages: 107,\n    currentPage: 23,\n    read: false\n  },\n  {\n    id: 2,\n    title: "Thus Spoke Zarathustra",\n    author: "Friedrich Nietzsche",\n    description: "This book is about the fictitious travels and speeches of Zarathustra.",\n    pages: 352,\n    currentPage: 52,\n    read: false\n  }\n];\n')))),(0,a.kt)("h2",{id:"get-all-records"},"Get all records"),(0,a.kt)("p",null,"Start with a route that lists all the records. This is usually the easiest, especially when you're using a real database. In this case, we can just return the array of books."),(0,a.kt)("details",null,(0,a.kt)("summary",null,"Click here to see the code"),(0,a.kt)("div",null,(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'app.get("/books", (req, res) => {\n  res.json(books).status(200);\n});\n')))),(0,a.kt)("h2",{id:"get-a-single-record"},"Get a single record"),(0,a.kt)("p",null,"Next, add a route that returns a single record. In this case, we can use the id to find the book in the array. To keep it simple, the id is the index of the book in the array."),(0,a.kt)("admonition",{type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"This is not a good idea in a real application. You should use a unique id that is not the index of the array. Otherwise, if you delete a record, the index will change and you'll have to update all the other records.")),(0,a.kt)("details",null,(0,a.kt)("summary",null,"Click here to see the code"),(0,a.kt)("div",null,(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'app.get("/books/:id", (req, res) => {\n  const book = books[parseInt(req.params.id)];\n  res.json(book).status(200);\n});\n')))),(0,a.kt)("h2",{id:"add-a-record"},"Add a record"),(0,a.kt)("p",null,"Now, let's add a route that allows us to add a record. In this case, we'll just add the book to the array. The id will be the length of the array."),(0,a.kt)("admonition",{type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"Again, this is not a good idea in a real application. Once your start deleting records, the id will no longer be the length of the array.")),(0,a.kt)("details",null,(0,a.kt)("summary",null,"Click here to see the code"),(0,a.kt)("div",null,(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'app.post("/books", (req, res) => {\n  let book = req.body;\n  books.id = books.length;\n  books.push(book);\n  res.json(book).status(201);\n});\n')))),(0,a.kt)("h2",{id:"update-a-record"},"Update a record"),(0,a.kt)("p",null,"Next, let's add a route that allows us to update a record. In this case, we'll just replace the book in the array with the new book."),(0,a.kt)("details",null,(0,a.kt)("summary",null,"Click here to see the code"),(0,a.kt)("div",null,(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'app.put("/books/:id", (req, res) => {\n  let book = req.body;\n  books[parseInt(req.params.id)] = book;\n  res.json(book).status(200);\n});\n')))),(0,a.kt)("h2",{id:"delete-a-record"},"Delete a record"),(0,a.kt)("p",null,"Finally, let's add a route that allows us to delete a record. In this case, we'll just remove the book from the array."),(0,a.kt)("admonition",{type:"danger"},(0,a.kt)("p",{parentName:"admonition"},"In case I haven't emphasized this enough yet, this is not a good idea in a real application. You should use a unique id that is not the index of the array. Otherwise, if you delete a record, the index will change and you'll have to update all the other records, which will cause all sorts of other issues.")),(0,a.kt)("details",null,(0,a.kt)("summary",null,"Click here to see the code"),(0,a.kt)("div",null,(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'app.delete("/books/:id", (req, res) => {\n  books.splice(parseInt(req.params.id), 1);\n  res.status(204).send();\n});\n')))))}p.isMDXComponent=!0}}]);